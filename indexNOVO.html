<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stef's Second Brain</title>
    <style>

        /* Reset básico */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

	body, .menu-horizontal, .menu-horizontal a, .dropdown-content, .flyout-content, .multi-column-links a {
    	    font-family: Arial, sans-serif;
	    font-size: 10px;
	}

        /* Menu horizontal */
        .menu-horizontal {
            background: #757dc3;
            padding: 0;
	    position: relative;
            z-index: 1000;
        }

        .menu-horizontal > ul {
            list-style: none;
            display: flex;
        }

        .menu-horizontal > ul > li {
            position: relative;
        }

        .menu-horizontal a {
            display: block;
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            transition: 0.3s;
	    cursor: pointer;
        }

        .menu-horizontal a:hover {
            background: #757dc3;
        }

	.menu-horizontal ul,
	.menu-horizontal li {
    	    list-style: none;
	}

        /* Dropdown */
        .dropdown > a::after {
            content: " ▼";
            font-size: 0.8em;
            margin-left: 5px;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background: #757dc3;
            min-width: 150px; /* Largura maior para múltiplas colunas */
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            z-index: 1001;
            padding: 15px 0;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        /* Layout de múltiplas colunas */
        .multi-column {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 3 colunas */
            gap: 0;
        }

        .two-columns {
            grid-template-columns: repeat(2, 1fr); /* 2 colunas */
        }

        .four-columns {
            grid-template-columns: repeat(4, 1fr); /* 4 colunas */
        }

        .column-section {
            padding: 0;
        }

	.multi-column-links {
            column-count: 3; /* Número de colunas */
            column-gap: 0;
            padding: 0;
        }

        .multi-column-links li {
            break-inside: avoid; /* Evita que um item seja dividido entre colunas */
            page-break-inside: avoid;
        }

        .multi-column-links a {
            padding: 10px 20px;
            border: none;
            font-size: 10px;
            color: #ffffff;
        }

        .multi-column-links a:hover {
            background: #757dc3;
            color: white;
        }

        .column-section h3 {
            color: #000000;
            font-size: 10px;
            font-weight: bold;
            padding: 10px 20px 5px;
            margin: 0;
            border-bottom: 1px solid #c0c0c0;
            text-transform: uppercase;
        }

        .column-section ul {
            list-style: none;
            padding: 0;
        }

        .column-section li {
            border-bottom: none;
        }

        .column-section a {
            padding: 8px 20px;
            border: none;
            font-size: 10px;
            color: #ffffff;
        }

        .column-section a:hover {
            background: #757dc3;
            color: white;
        }

        /* Flyout individual */
        .flyout {
            position: relative;
        }

        .flyout-content {
            display: none;
            position: absolute;
            left: 100%;
            top: 0;
            background: #757dc3;
            min-width: 200px;
        }

        .flyout:hover .flyout-content {
            display: block;
        }

        /* Conteúdo */
        .content {
            padding: 20px;
	    position: relative;
            z-index: 1;
        }

        #conteudoCarregado {
            width: 100%;
            height: 600px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-top: 10px;
        }

    /* Classe para mostrar menus */
        .show {
            display: block !important;
        }

	#searchInput, #searchButton {
        font-family: Arial, sans-serif;
	}

	#searchResults {
        font-family: Arial, sans-serif;
        font-size: 10px;
	}

	.search-result-link {
        color: #3a1d4d;
        text-decoration: none;
	}

	.search-result-link:hover {
        text-decoration: underline;
	}

    </style>
</head>
<body>
    <!-- Menu Horizontal no Topo -->
<nav class="menu-horizontal">
    <ul>
        <li class="dropdown">
            <a href="#">CITAÇÕES</a>
            <ul class="dropdown-content">
                <!-- Primeiro flyout: ZUMBIS -->
                <li class="flyout">
                    <a href="#">ZUMBIS</a>
                    <ul class="flyout-content multi-column-links">
				
                            <li><a href="#" data-page="bishop2008.html">BISHOP, 2008</a></li>
                            <li><a href="#" data-page="cohen2012.html">COHEN, 2012</a></li>
                            <li><a href="#" data-page="bishop2006.html">BISHOP, 2006</a></li>
                            <li><a href="#" data-page="fausto2017.html">FAUSTO, 2017</a></li>
                            <li><a href="#" data-page="brooks2003.html">BROOKS, 2003</a></li>
                            <li><a href="#" data-page="luckhurst2016.html">LUCKHURST, 2016</a></li>
                            <li><a href="#" data-page="oloff2012.html">OLOFF, 2012</a></li>
                            <li><a href="#" data-page="stokes2010.html">STOKES, 2010</a></li>
                            <li><a href="#" data-page="kee2011.html">KEE, 2011</a></li>
                            <li><a href="#" data-page="penhagonsalves2018.html">PENHA & GONSALVES, 2018</a></li>
                            <li><a href="#" data-page="dunker2018.html">DUNKER, 2018</a></li>
                            <li><a href="#" data-page="netookamoto2018.html">NETO OKAMOTO, 2018</a></li>
                            <li><a href="#" data-page="estevao2018.html">ESTEVÃO, 2018</a></li>
                            <li><a href="#" data-page="filho2018.html">FILHO, 2018</a></li>
                            <li><a href="#" data-page="moder2018.html">MODER, 2018</a></li>
                            <li><a href="#" data-page="comentalejaffe2014.html">COMENTALE & JAFFE, 2014</a></li>
                            <li><a href="#" data-page="hasslerforest2014.html">HASSLER-FOREST, 2014</a></li>
                            <li><a href="#" data-page="bohman2014.html">BOHMAN, 2014</a></li>
                            <li><a href="#" data-page="shapiro2014.html">SHAPIRO, 2014</a></li>
                            <li><a href="#" data-page="raglin2014.html">RAGLIN, 2014</a></li>
                            <li><a href="#" data-page="sattar2014.html">SATTAR, 2014</a></li>
                            <li><a href="#" data-page="morton2014.html">MORTON, 2014</a></li>
                            <li><a href="#" data-page="ruthven2014.html">RUTHVEN, 2014</a></li>
                            <li><a href="#" data-page="gibson2014.html">GIBSON, 2014</a></li>
                            <li><a href="#" data-page="webbbyrnand2008.html">WEBB & BYRNAND, 2008</a></li>
                            <li><a href="#" data-page="boom2011.html">BOOM, 2011</a></li>
                            <li><a href="#" data-page="christie2011.html">CHRISTIE, 2011</a></li>
                            <li><a href="#" data-page="muntean2011.html">MUNTEAN, 2011</a></li>
                            <li><a href="#" data-page="zanimeaux2011.html">ZANI & MEAUX, 2011</a></li>
                            <li><a href="#" data-page="pifer2011.html">PIFER, 2011</a></li>
	
                    </ul>
                </li>
                <!-- Segundo flyout: WHITE GAZE -->
                <li class="flyout">
                    <a href="#">WHITE GAZE</a>
                    <ul class="flyout-content multi-column-links">
                        <li><a href="#" data-page="yancy2017.html">YANCY, 2017</a></li>
                        <li><a href="#" data-page="hooks2019.html">HOOKS, 2019</a></li>
                        <li><a href="#" data-page="williams2020.html">WILLIAMS, 2020</a></li>
                        <li><a href="#" data-page="dotson2006.html">DOTSON, 2006</a></li>


                    </ul>
                </li>

                <!-- Você pode adicionar mais flyouts aqui -->

                <li class="flyout">
                    <a href="#">CIÊNCIA</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="stengers2002.html">STENGERS, 2002</a></li>
                        <li><a href="#" data-page="stengers2018.html">STENGERS, 2018</a></li>
                        <li><a href="#" data-page="lewis1992.html">LEWIS, 1992</a></li>
                        <li><a href="#" data-page="merchant1989.html">MERCHANT, 1989</a></li>
                        <li><a href="#" data-page="harding2015.html">HARDING, 2015</a></li>


                    </ul>
                </li>

		<li class="flyout">
                    <a href="#">HORROR</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="coleman2019.html">COLEMAN, 2019</a></li>



                    </ul>
                </li>

		<li class="flyout">
                    <a href="#">HAITI</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="charlier2015.html">CHARLIER, 2015</a></li>
                        <li><a href="#" data-page="degoul2011.html">DEGOUL, 2011</a></li>
                        <li><a href="#" data-page="seabrook2016.html">SEABROOK, 2016</a></li>


                    </ul>
                </li>

		<li class="flyout">
                    <a href="#">REL. INTERN.</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="drezner2015.html">DREZNER, 2015</a></li>

                    </ul>
                </li>

		<li class="flyout">
                    <a href="#">ONTOLOGIA</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="harman2018.html">HARMAN, 2018</a></li>
                        <li><a href="#" data-page="jonas2017.html">JONAS, 2017</a></li>
                        <li><a href="#" data-page="despret2023.html">DESPRET, 2023</a></li>
                        <li><a href="#" data-page="rolnik2021.html">ROLNIK, 2021</a></li>
                        <li><a href="#" data-page="simondon2020.html">SIMONDON, 2020</a></li>
                        <li><a href="#" data-page="povinelli2023.html">POVINELLI, 2023</a></li>
                        <li><a href="#" data-page="serres1994.html">SERRES, 1994</a></li>
                        <li><a href="#" data-page="petit2023.html">PETIT, 2023</a></li>
                        <li><a href="#" data-page="latour2019.html">LATOUR, 2019</a></li>
                        <li><a href="#" data-page="lapoujade2017.html">LAPOUJADE, 2017</a></li>
                        <li><a href="#" data-page="souriau2020.html">SOURIAU, 2020</a></li>
                        <li><a href="#" data-page="povinelli2024.html">POVINELLI, 2024</a></li>
                        <li><a href="#" data-page="luduenaromandini2021.html">LUDUEÑA ROMANDINI, 2021</a></li>
                        <li><a href="#" data-page="luduenaromandini2023.html">LUDUEÑA ROMANDINI, 2023</a></li>
                        <li><a href="#" data-page="nodari2024.html">NODARI, 2024</a></li>

                    </ul>
                </li>

		<li class="flyout">
                    <a href="#">FUNGOS</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="millsbattermanfield2017.html">MILLS, BATTERMAN  & FIELD, 2017</a></li>
                        <li><a href="#" data-page="read1997.html">READ, 1997</a></li>
                        <li><a href="#" data-page="sheldrake2021.html">SHELDRAKE, 2021</a></li>

                    </ul>
                </li>

		<li class="flyout">
                    <a href="#">APOCALIPSE</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="hollinger2000.html">HOLLINGER, 2000</a></li>
                        <li><a href="#" data-page="hughes2021.html">HUGHES, 2021</a></li>
                        <li><a href="#" data-page="tathe2016.html">TATHE, 2016</a></li>
                        <li><a href="#" data-page="lilly2016.html">LILLY, 2016</a></li>
                        <li><a href="#" data-page="murphy2016.html">MURPHY, 2016</a></li>
                        <li><a href="#" data-page="suvi2023.html">SUVI, 2023</a></li>
                        <li><a href="#" data-page="buell2010.html">BUELL, 2010</a></li>
                        <li><a href="#" data-page="fagan2017.html">FAGAN, 2017</a></li>
                        <li><a href="#" data-page="rothe2020.html">ROTHE, 2020</a></li>


                    </ul>
                </li>

		<li class="flyout">
                    <a href="#">ÉTICA AMBIENTAL</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="routley1973.html">ROUTLEY, 1973</a></li>
                        <li><a href="#" data-page="routleyroutley1973.html">ROUTLEY & ROUTLEY, 1973</a></li>
                        <li><a href="#" data-page="krenak2022.html">KRENAK, 2022</a></li>

                    </ul>
                </li>
		

		<li class="flyout">
                    <a href="#">COLONIALISMO</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="fanon2008.html">FANON, 2008</a></li>
                        <li><a href="#" data-page="said1994.html">SAID, 1994</a></li>
                        <li><a href="#" data-page="comentale2014.html">COMENTALE, 2014</a></li>
                        <li><a href="#" data-page="sartre1968.html">SARTRE, 1968</a></li>
                        <li><a href="#" data-page="negobispo2023.html">NÊGO BISPO, 2023</a></li>
                        <li><a href="#" data-page="goncalves2024.html">GONÇALVES, 2024</a></li>
                        <li><a href="#" data-page="ferreiradasilva2022.html">FERREIRA DA SILVA, 2022</a></li>


                    </ul>
                </li>

		<li class="flyout">
                    <a href="#">PÓS-HUMANISMO</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="haraway2000.html">HARAWAY, 2000</a></li>
                        <li><a href="#" data-page="lauroembry2008.html">LAURO & EMBRY, 2008</a></li>
                        <li><a href="#" data-page="hayles1999.html">HAYLES, 1999</a></li>

                    </ul>
                </li>


		<li class="flyout">
                    <a href="#">BIOLOGIA</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="sodikoff2013.html">SODIKOFF, 2013</a></li>
                        <li><a href="#" data-page="sohdi2008.html">SOHDI et al., 2008</a></li>

                    </ul>
                </li>



		<li class="flyout">
                    <a href="#">ANTROPOCENO</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="stengers2015.html">STENGERS, 2015</a></li>
                        <li><a href="#" data-page="latour2020.html">LATOUR, 2020</a></li>
                        <li><a href="#" data-page="haraway2016.html">HARAWAY, 2016</a></li>
                        <li><a href="#" data-page="margulis1995.html">MARGULIS, 1995</a></li>
                        <li><a href="#" data-page="prigoginestengers1984.html">PRIGOGINE & STENGERS, 1984</a></li>
                        <li><a href="#" data-page="latour1994.html">LATOUR, 1994</a></li>
                        <li><a href="#" data-page="marques2016.html">MARQUES, 2016</a></li>
                        <li><a href="#" data-page="asimov1979.html">ASIMOV, 1979</a></li>
                        <li><a href="#" data-page="danowskiviveirosdecastro2017.html">DANOWSKI & VIVEIROS DE CASTRO, 2017</a></li>
                        <li><a href="#" data-page="morton2013.html">MORTON, 2013</a></li>
                        <li><a href="#" data-page="valentim2018.html">VALENTIM, 2018</a></li>
                        <li><a href="#" data-page="tsing2022.html">TSING, 2022</a></li>
                        <li><a href="#" data-page="latour2020b.html">LATOUR, 2020B</a></li>
                        <li><a href="#" data-page="moore2023.html">MOORE, 2023</a></li>
                        <li><a href="#" data-page="chakrabarty2021.html">CHAKRABARTY, 2021</a></li>
                        <li><a href="#" data-page="danowskiviveirosdecastro2023.html">DANOWSKI & VIVEIROS DE CASTRO, 2023</a></li>
                        <li><a href="#" data-page="valentim2024.html">VALENTIM, 2024</a></li>


                    </ul>
                </li>


		<li class="flyout">
                    <a href="#">CINEMA</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="bernadet1996.html">BERNADET, 1996</a></li>


                    </ul>
                </li>


		<li class="flyout">
                    <a href="#">LINGUAGEM</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="soldatjaffe2014.html">SOLDAT-JAFFE, 2014</a></li>
                        <li><a href="#" data-page="rome2018.html">ROMÉ, 2018</a></li>
                        <li><a href="#" data-page="fausto2012.html">FAUSTO, 2012</a></li>
                        <li><a href="#" data-page="agamben2006.html">AGAMBEN, 2006</a></li>


                    </ul>
                </li>


		<li class="flyout">
                    <a href="#">PSICANÁLISE</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="freud2019.html">FREUD, 2019</a></li>
                        <li><a href="#" data-page="dolar2018.html">DOLAR, 2018</a></li>
                        <li><a href="#" data-page="freud2020.html">FREUD, 2020</a></li>
                        <li><a href="#" data-page="freud2021.html">FREUD, 2021</a></li>

                    </ul>
                </li>


		<li class="flyout">
                    <a href="#">FICÇÃO</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="lapoujade2022.html">LAPOUJADE, 2022</a></li>

                    </ul>
                </li>


		<li class="flyout">
                    <a href="#">ESTUDOS CULTURAIS</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="hall2019.html">HALL, 2019</a></li>
                        <li><a href="#" data-page="sarkeesian2010.html">SARKEESIAN, 2010</a></li>


                    </ul>
                </li>


		<li class="flyout">
                    <a href="#">CRIP/QUEER/AFROFUTURISMO</a>
                    <ul class="flyout-content multi-column-links">

                        <li><a href="#" data-page="greiner2023.html">GREINER, 2023</a></li>
                        <li><a href="#" data-page="gomesdesouza2019.html">GOMES DE SOUZA, 2019</a></li>
                        <li><a href="#" data-page="walker2021.html">WALKER, 2021</a></li>
                        <li><a href="#" data-page="preciado2020.html">PRECIADO, 2020</a></li>
                        <li><a href="#" data-page="preciado2023.html">PRECIADO, 2023</a></li>

                    </ul>
                </li>


            </ul>
        </li>

        <li class="dropdown">
            <a href="#">BIBLIOGRAFIA</a>
            <ul class="dropdown-content">
                <!-- Primeiro flyout: ZUMBIS -->
                <li>
			<a href="#" data-page="lidas.html">LIDAS</a>

                </li>

                <!-- Segundo flyout: WHITE GAZE -->

                <li class="flyout">
                    <a href="#">PRÓXIMAS</a>
                    <ul class="flyout-content multi-column-links">
                        <li><a href="#" data-page="proximosartigos.html">ARTIGOS/CAPÍTULOS</a></li>
                        <li><a href="#" data-page="proximoslivros.html">LIVROS</a></li>

                    </ul>
                </li>

                <!-- Você pode adicionar mais flyouts aqui -->

            </ul>
        </li>

		<li class="dropdown">
            <a href="#">FILMOGRAFIA</a>
            <ul class="dropdown-content">
                <!-- Primeiro flyout: ZUMBIS -->
                <li>
			<a href="#" data-page="vistos.html">VISTOS</a>

              </ul>
	</li>

	<li class="dropdown">
    	    <a href="#">PESQUISA</a>
    	    <ul class="dropdown-content">
        	<li>
            		<div style="padding: 10px; width: 300px;">
                	<input type="text" id="searchInput" placeholder="Digite sua pesquisa..." style="width: 100%; padding: 8px; margin-bottom: 10px;">
                	<button id="searchButton" style="width: 100%; padding: 8px;">Pesquisar</button>
                	<div id="searchResults" style="margin-top: 10px; max-height: 400px; overflow-y: auto;"></div>
            		</div>
        	</li>
    	    </ul>
	</li>

    </ul>
</nav>


    <!-- Área de Conteúdo -->
    <main class="content">
        <iframe id="conteudoCarregado" src="welcome.html"></iframe>
    </main>

<script>
// TODO: SUBSTITUA TODO O SEU CÓDIGO JavaScript atual por ESTE

document.addEventListener('DOMContentLoaded', function() {
    const links = document.querySelectorAll('[data-page]');
    const iframe = document.getElementById('conteudoCarregado');
    const dropdowns = document.querySelectorAll('.dropdown');
    const flyouts = document.querySelectorAll('.flyout');

    // Função para carregar páginas no iframe
    links.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const pagina = this.getAttribute('data-page');
            iframe.src = pagina;
            closeAllMenus();
        });
    });

    // Controlar menus
    dropdowns.forEach(dropdown => {
        const dropdownContent = dropdown.querySelector('.dropdown-content');
        
        dropdown.addEventListener('mouseenter', function() {
            closeAllMenus();
            dropdownContent.classList.add('show');
        });
        
        dropdown.addEventListener('mouseleave', function(e) {
            setTimeout(() => {
                if (!dropdownContent.matches(':hover')) {
                    dropdownContent.classList.remove('show');
                }
            }, 100);
        });
    });

    flyouts.forEach(flyout => {
        const flyoutContent = flyout.querySelector('.flyout-content');
        
        flyout.addEventListener('mouseenter', function() {
            flyoutContent.classList.add('show');
        });
        
        flyout.addEventListener('mouseleave', function(e) {
            setTimeout(() => {
                if (!flyoutContent.matches(':hover')) {
                    flyoutContent.classList.remove('show');
                }
            }, 100);
        });
    });

    // Fechar todos os menus quando clicar em qualquer lugar da página
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.menu-horizontal')) {
            closeAllMenus();
        }
    });

    // Função para fechar todos os menus
    function closeAllMenus() {
        document.querySelectorAll('.dropdown-content, .flyout-content').forEach(menu => {
            menu.classList.remove('show');
        });
    }

    // SISTEMA DE PESQUISA
    document.getElementById('searchButton').addEventListener('click', performSearch);
    document.getElementById('searchInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            performSearch();
        }
    });

    async function performSearch() {
        const query = document.getElementById('searchInput').value.toLowerCase().trim();
        const resultsContainer = document.getElementById('searchResults');
        
        if (!query) {
            resultsContainer.innerHTML = '<div style="padding: 10px; color: #666;">Digite algo para pesquisar</div>';
            return;
        }

        resultsContainer.innerHTML = '<div style="padding: 10px; color: #666;">Pesquisando... (pode levar alguns segundos)</div>';

        const pageLinks = document.querySelectorAll('[data-page]');
        let results = [];

        // Usar Promise.all para buscar várias páginas simultaneamente
        const fetchPromises = Array.from(pageLinks).map(async (link) => {
            const pageFile = link.getAttribute('data-page');
            
            try {
                // Adicionar timestamp para evitar cache
                const response = await fetch(`${pageFile}?t=${Date.now()}`);
                
                if (response.status === 200) {
                    const text = await response.text();
                    const pageText = extractTextFromHTML(text);
                    
                    if (pageText.toLowerCase().includes(query)) {
                        return {
                            title: link.textContent.trim(),
                            page: pageFile,
                            category: getCategoryFromLink(link),
                            excerpt: getExcerpt(pageText, query)
                        };
                    }
                }
            } catch (error) {
                console.warn(`Erro em ${pageFile}:`, error);
            }
            return null;
        });

        try {
            const allResults = await Promise.all(fetchPromises);
            results = allResults.filter(result => result !== null);
            displaySearchResults(results, query);
        } catch (error) {
            resultsContainer.innerHTML = `
                <div style="padding: 10px; color: #d00;">
                    Erro na pesquisa: ${error.message}<br>
                    <small>Verifique o console para detalhes.</small>
                </div>
            `;
        }
    }

    // Função para extrair texto do HTML
    function extractTextFromHTML(html) {
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = html;
        
        // Remover elementos que não contêm conteúdo de pesquisa
        const elementsToRemove = tempDiv.querySelectorAll('script, style, nav, header, footer, meta, link');
        elementsToRemove.forEach(el => el.remove());
        
        return tempDiv.textContent || tempDiv.innerText || '';
    }

    // Função para determinar a categoria do link
    function getCategoryFromLink(link) {
        let parent = link.closest('.flyout-content');
        if (parent) {
            let flyoutTitle = parent.previousElementSibling;
            if (flyoutTitle && flyoutTitle.tagName === 'A') {
                return flyoutTitle.textContent.trim();
            }
        }
        return 'Geral';
    }

    function getExcerpt(text, query, length = 150) {
        const index = text.toLowerCase().indexOf(query.toLowerCase());
        if (index === -1) return 'Trecho não disponível';
        
        const start = Math.max(0, index - length/2);
        const end = Math.min(text.length, index + query.length + length/2);
        let excerpt = text.substring(start, end).trim();
        
        // Limpar o excerpt (remover múltiplos espaços, quebras de linha)
        excerpt = excerpt.replace(/\s+/g, ' ');
        
        if (start > 0) excerpt = '...' + excerpt;
        if (end < text.length) excerpt = excerpt + '...';
        
        return excerpt;
    }

    function displaySearchResults(results, query) {
        const resultsContainer = document.getElementById('searchResults');
        
        if (results.length === 0) {
            resultsContainer.innerHTML = `
                <div style="padding: 10px; color: #666;">
                    Nenhum resultado encontrado para "<strong>${query}</strong>".<br>
                    <small>Tente usar palavras diferentes ou verifique se as páginas existem.</small>
                </div>
            `;
            return;
        }

        resultsContainer.innerHTML = `
            <div style="padding: 5px 10px; background: #f0f0f0; border-radius: 3px; margin-bottom: 10px;">
                <strong>${results.length}</strong> resultado(s) encontrado(s) para "<strong>${query}</strong>"
            </div>
        `;

        results.forEach(result => {
            const resultElement = document.createElement('div');
            resultElement.style.marginBottom = '15px';
            resultElement.style.padding = '10px';
            resultElement.style.border = '1px solid #e0e0e0';
            resultElement.style.borderRadius = '5px';
            resultElement.style.backgroundColor = '#f9f9f9';
            
            resultElement.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px;">
                    <a href="#" data-page="${result.page}" class="search-result-link" 
                       style="color: #3a1d4d; text-decoration: none;">
                        ${result.title}
                    </a>
                </div>
                <div style="font-size: 11px; color: #666; margin-bottom: 5px;">
                    <strong>Categoria:</strong> ${result.category}
                </div>
                <div style="font-size: 11px; color: #333; font-style: italic;">
                    ${result.excerpt}
                </div>
            `;
            
            resultsContainer.appendChild(resultElement);
        });

        // Adicionar evento de clique para os resultados
        document.querySelectorAll('.search-result-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const page = this.getAttribute('data-page');
                document.getElementById('conteudoCarregado').src = page;
                closeAllMenus();
            });
        });
    }
}); // FIM do DOMContentLoaded
</script>
</body>
</html>